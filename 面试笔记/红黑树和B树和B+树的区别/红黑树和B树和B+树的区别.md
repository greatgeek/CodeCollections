# 红黑树和B树和B+树的区别

## 红黑树

红黑树是二叉树，比起 AVL 树的严格平衡特性，它是尽量保持平衡。

## B树相对于红黑树的区别

在大规模数据存储时，红黑树往往由于树的深度过大而造成磁盘 IO 读写过于频繁，进而导致效率低下的情况。树的深度过大会造成磁盘 IO 频繁频繁读写，根据磁盘查找存取的次数往往由树的高度所决定，所以，只要我们通过某种较好的树结构减少树的高度即可，B 树可以有多个子节点，从几十到上千，可以降低树的高度。

## B树和B+树的区别

1. （**数据全都是叶子节点**）B树的所有节点都带有指向数据的指针（ROWID），B+树中只有叶子节点会带有指向数据的指针（ROW）。因为B＋树把它所有的卫星数据（或指向数据的指针）都存储在叶节点中，内部节点只存放键和孩子指针，不会带上指向数据的指针（ROWID），这样，一个块中可以容纳更多的索引项，一是可以降低树的高度。二是内部节点可以定位更多的叶子节点。
2. （**next 指针**）B＋树中的每个叶子节点都包含指向下一个叶子节点的指针。所有叶子节点都是通过指针连接在一起，而B树不会。叶子节点之间通过指针来连接，**范围扫描将十分简单**，而对于B树来说，则需要在叶子节点和内部节点不停地往返移动。

B+树还有一个最大的好处，遍历更加高效、方便扫库，B树必须用中序遍历的方法扫库，而B+树直接从叶子就可以扫描到全部节点，B+树支持 range-query 非常方便，而B树不支持。这是数据库选用 B+树的主要原因。

## 为什么B+树比B树更适合实际应用中操作系统的文件索引和数据库索引 ？

1） B+ 树的磁盘读写代价更低

B+树的内部节点没有指向数据的指针。因此其内部节点相对 B 树更小。如果把所有同一内部节点的键存放在同一盘内，那么盘块所能容纳的键数量也越多。一次性读入内存中的能查找的键也就越多。相对来说 IO 读写次数也就降低了。

2）B+树的查询效率更加稳定

由于非叶子节点并不是最终指向数据的节点，而指向叶子节点中键的索引。所以任何键的查找必须走一条从根节点到叶子节点的路。所有键查询的路径长度相同，导致每一个数据的查询效率相当。

数据库索引采用 B+ 树的主要原因是 B 树在提高磁盘 IO 性能的同时并没有解决元素遍历的效率低下的问题。 正是为了解决这个问题，B+ 树应运而生，B+ 树只要遍历叶子节点就可以实现整棵树的遍历。而且在数据库中基于范围的查询是非常频繁的，而 B 树的范围查询效率不高。

## 各有优点：

B+ 树的优点：

1. 非叶子节点不会带上指向数据的指针，这个一个块可以容纳更多的索引项，一是可以降低树的高度；二是一个内部节点可以定位到更多的叶子节点。
2. 叶子节点之间通过指针来连接，范围扫描将十分简单，而对于 B 树来说，则需要在叶子节点和内部节点不停地往返移动。

B 树的优点：

对于在内部节点的数据，可直接得到，不必根据叶子节点来定位。

## 参考

[B树、B+树、红黑树、AVL树比较](https://www.cnblogs.com/chengdabelief/p/7384691.html)